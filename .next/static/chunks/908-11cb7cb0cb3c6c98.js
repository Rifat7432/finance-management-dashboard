"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{3998:(e,t,a)=>{a.d(t,{$:()=>d});var r=a(95155);a(12115);var n=a(17129),s=a(83101),o=a(64269);let i=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:s,asChild:d=!1,...l}=e,c=d?n.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:a,size:s,className:t})),...l})}},27124:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(95155),n=a(42348),s=a(64269);let o=function(e){let{className:t,...a}=e;return(0,r.jsx)(n.A,{role:"status","aria-label":"Loading",className:(0,s.cn)("size-8 animate-spin text-primary",t),...a})}},31012:(e,t,a)=>{a.d(t,{q:()=>l});var r=a(36317),n=a(61321),s=a(18720),o=a(53788);let i=(0,r.cw)({baseUrl:"".concat("http://localhost:5000","/api/v1"),credentials:"include",prepareHeaders:(e,t)=>{let{getState:a}=t,r=a().auth.token;return r&&e.set("authorization","Bearer ".concat(r)),e}}),d=async(e,t,a)=>{var r,n;let d=await i(e,t,a);if((null==(r=d.error)?void 0:r.status)===404&&s.oR.error("User not found"),(null==(n=d.error)?void 0:n.status)===401)try{let r=await fetch("".concat("http://localhost:5000","/api/v1/auth/refresh-token"),{method:"POST",credentials:"include"}),n=await r.json();n.success?(t.dispatch((0,o.yU)(n.data.accessToken)),d=await i(e,t,a)):t.dispatch((0,o.je)())}catch(e){t.dispatch((0,o.je)())}return d},l=(0,n.xP)({reducerPath:"baseApi",baseQuery:d,tagTypes:["getUser","getAppointments","getContents","getAds"],endpoints:()=>({})})},31250:(e,t,a)=>{a.d(t,{G:()=>s,j:()=>n});var r=a(1213);let n=r.wA,s=r.d4},37656:(e,t,a)=>{a.d(t,{UN:()=>n,Vh:()=>o,_t:()=>r,vG:()=>s});let{useGetUserFinanceTrackQuery:r,useGetUserExpensesDetailsQuery:n,useGetUserNotificationSettingsQuery:s,useUpdateUserNotificationSettingsMutation:o}=a(31012).q.injectEndpoints({endpoints:e=>({getUserFinanceTrack:e.query({query:e=>({url:"admin/users/finance-track",method:"GET",params:e})}),getUserExpensesDetails:e.query({query:e=>({url:"admin/user/expenses-details/".concat(e),method:"GET"})}),getUserNotificationSettings:e.query({query:e=>({url:"admin/notification-settings/".concat(e),method:"GET"})}),updateUserNotificationSettings:e.mutation({query:e=>{let{userId:t,data:a}=e;return{url:"admin/notification-settings/".concat(t),method:"PATCH",body:a}}})})})},53788:(e,t,a)=>{a.d(t,{Ay:()=>l,em:()=>s,je:()=>d,r1:()=>o,yU:()=>n});let r=(0,a(26286).Z0)({name:"product",initialState:{user:null,token:null,collapsed:!1,loading:!1},reducers:{storUserData:(e,t)=>{e.user=t.payload},storToken:(e,t)=>{e.token=t.payload},setLoading:(e,t)=>{e.loading=t.payload},isCollapsed:(e,t)=>{e.collapsed=t.payload},logOut:e=>{e.user=null,e.token=null,localStorage.removeItem("token")}}}),{storToken:n,storUserData:s,setLoading:o,isCollapsed:i,logOut:d}=r.actions,l=r.reducer},64269:(e,t,a)=>{a.d(t,{cn:()=>s,q:()=>o});var r=a(2821),n=a(75889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}let o=e=>new Promise((t,a)=>{let r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>{window.URL.revokeObjectURL(r.src),t(r.duration)},r.onerror=()=>{a(Error("Failed to load video metadata"))},r.src=URL.createObjectURL(e)})},85897:(e,t,a)=>{a.d(t,{BK:()=>i,eu:()=>o,q5:()=>d});var r=a(95155);a(12115);var n=a(7870),s=a(64269);function o(e){let{className:t,...a}=e;return(0,r.jsx)(n.bL,{"data-slot":"avatar",className:(0,s.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)(n._V,{"data-slot":"avatar-image",className:(0,s.cn)("aspect-square size-full",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)(n.H4,{"data-slot":"avatar-fallback",className:(0,s.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...a})}},86948:(e,t,a)=>{a.d(t,{Wu:()=>d,ZB:()=>i,Zp:()=>s,aR:()=>o});var r=a(95155);a(12115);var n=a(64269);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...a})}},92300:(e,t,a)=>{a.d(t,{MA:()=>l,VL:()=>s,nv:()=>o,vf:()=>r});let{useGetUserQuery:r,useEmailUserMutation:n,useGetAllUsersQuery:s,useBlockUserMutation:o,useDeleteUserMutation:i,useGetUserByIdQuery:d,useGetAdminStatsQuery:l}=a(31012).q.injectEndpoints({endpoints:e=>({getUser:e.query({query:()=>({url:"users/profile",method:"GET"})}),getUserById:e.query({query:e=>({url:"users/user/".concat(e),method:"GET"})}),deleteUser:e.mutation({query:e=>({url:"users/delete/".concat(e),method:"DELETE"})}),blockUser:e.mutation({query:e=>({url:"users/block/".concat(e),method:"DELETE"})}),getAllUsers:e.query({query:e=>({url:"users",method:"GET",params:e})}),getAdminStats:e.query({query:e=>({url:"admin/stats",method:"GET",params:e})}),emailUser:e.mutation({query:e=>({url:"email",method:"POST",body:e})})})})},97144:(e,t,a)=>{a.d(t,{DashboardLayout:()=>U});var r=a(95155),n=a(52619),s=a.n(n),o=a(20063),i=a(64269),d=a(59384),l=a(91169),c=a(80534),u=a(60890),m=a(38104),h=a(15870),g=a(84926),p=a(31250),f=a(53788),v=a(15239);let x=[{name:"Dashboard",href:"/",icon:d.A},{name:"User Management",href:"/users",icon:l.A},{name:"Finance Data Monitoring",href:"/finance",icon:c.A},{name:"Content Management",href:"/content",icon:u.A},{name:"Appointment",href:"/appointment",icon:m.A},{name:"Ad Management",href:"/ad",icon:h.A}];function y(){let e=(0,o.usePathname)(),t=(0,p.j)();return(0,r.jsxs)("div",{className:"flex h-screen w-64 flex-col bg-white border-r border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded",children:(0,r.jsx)(v.default,{src:"/logo.png",alt:"logo",width:120,height:40,priority:!0})}),(0,r.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:"ROHU APP "})]}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-1",children:x.map(t=>{let a=e===t.href;return(0,r.jsxs)(s(),{href:t.href,className:(0,i.cn)("flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors",a?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"),children:[(0,r.jsx)(t.icon,{className:"w-5 h-5"}),t.name]},t.name)})}),(0,r.jsx)("div",{className:"px-4 py-4 border-t border-gray-200",children:(0,r.jsxs)("button",{onClick:()=>{t((0,f.je)())},className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 w-full cursor-pointer",children:[(0,r.jsx)(g.A,{className:"w-5 h-5"}),"Logout"]})})]})}var b=a(85897),j=a(3998),w=a(92300),k=a(12115);function N(){let e=(0,p.j)(),{data:t,isLoading:a}=(0,w.vf)(void 0);(0,k.useEffect)(()=>{t&&(e((0,f.r1)(a)),e((0,f.em)({name:t.data.name,email:t.data.email,role:t.data.role,image:t.data.image?t.data.image:void 0})))},[a,e,t]);let n=null==t?void 0:t.data;return null===n||a?null:(0,r.jsxs)("header",{className:"flex items-center justify-end gap-4 px-6 py-4 border-b",style:{background:"var(--background)",color:"var(--foreground)"},children:[(0,r.jsx)(j.$,{variant:"ghost",size:"icon",className:"rounded-lg"}),(0,r.jsxs)(b.eu,{children:[(0,r.jsx)(b.BK,{src:(null==n?void 0:n.image)?null==n?void 0:n.image:"/placeholder.svg?height=32&width=32"}),(0,r.jsx)(b.q5,{children:null==n?void 0:n.name})]})]})}var q=a(86600),A=a(27124);function U(e){let{children:t}=e,{token:a}=(0,p.G)(e=>e.auth),n=(0,o.useRouter)(),s=(0,o.usePathname)();return((0,k.useEffect)(()=>{if(!s.startsWith("/auth")){if(!a)return void n.push("/auth/login");try{let e=(0,q.s)(a);(!e.exp||1e3*e.exp<Date.now())&&n.push("/auth/login")}catch(e){n.push("/auth/login")}}},[a,s,n]),a)?(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsx)(y,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(N,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto p-6",children:t})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center pt-40",children:(0,r.jsx)(A.A,{})})}}}]);