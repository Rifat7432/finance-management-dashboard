(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{26983:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(71847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},27581:(e,t,r)=>{Promise.resolve().then(r.bind(r,97144)),Promise.resolve().then(r.bind(r,88110))},59194:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,Ir:()=>o,Rz:()=>a,Xq:()=>n,_A:()=>s,cZ:()=>i});let l=(0,r(26286).Z0)({name:"product",initialState:{updateContent:null,isUpdateModalOpen:!1,isCreateModalOpen:!1,contentCategory:"All",page:1,limit:10},reducers:{setUpdateContent:(e,t)=>{e.updateContent=t.payload},setIsUpdateModalOpen:(e,t)=>{e.isUpdateModalOpen=t.payload},setIsCreateModalOpen:(e,t)=>{e.isCreateModalOpen=t.payload},setContentCategory:(e,t)=>{e.contentCategory=t.payload},setPage:(e,t)=>{e.page=t.payload}}}),{setUpdateContent:a,setIsCreateModalOpen:s,setIsUpdateModalOpen:n,setContentCategory:i,setPage:o}=l.actions,d=l.reducer},88110:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var l=r(95155),a=r(3998),s=r(86948),n=r(26983),i=r(71847);let o=(0,i.A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]),d=(0,i.A)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var c=r(71360),u=r(11010),x=r(12115),m=r(31012);let v="/contents",{useCreateContentMutation:h,useDeleteContentMutation:g,useGetContentsQuery:p,useUpdateContentMutation:y}=m.q.injectEndpoints({endpoints:e=>({createContent:e.mutation({query:e=>({url:"".concat(v,"/"),method:"POST",body:e}),invalidatesTags:["getContents"]}),getContents:e.query({query:e=>({url:"".concat(v,"/"),method:"GET",params:e}),providesTags:["getContents"]}),updateContent:e.mutation({query:e=>{let{id:t,updateContentData:r}=e;return{url:"".concat(v,"/").concat(t),method:"PATCH",body:r}},invalidatesTags:["getContents"]}),deleteContent:e.mutation({query:e=>({url:"".concat(v,"/").concat(e),method:"DELETE"}),invalidatesTags:["getContents"]})})});var j=r(18720),f=r(31250),C=r(59194);let N=e=>{let{video:t}=e,r=(0,f.j)(),[i]=g(),[m,v]=(0,x.useState)(!1),h=(0,x.useRef)(null),p=async e=>{try{var t,r,l;let a=await i(e);if((null==a?void 0:a.error)&&!(null==a||null==(r=a.error)||null==(t=r.data)?void 0:t.success))return void j.oR.error(a.error.data.message||"Failed to delete content");(null==(l=a.data)?void 0:l.success)&&j.oR.success(a.data.message||"Content deleted successfully")}catch(e){console.error("Delete error:",e),j.oR.error("Failed to delete content")}};return(0,l.jsxs)(s.Zp,{className:"shadow-lg rounded-2xl overflow-hidden pt-0",children:[(0,l.jsx)("video",{ref:h,src:t.videoUrl,controls:!1,className:"w-full h-full object-cover max-h-72",onEnded:()=>v(!1),onPause:()=>v(!1),onPlay:()=>v(!0)}),(0,l.jsxs)(s.Wu,{className:"p-4 space-y-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold leading-tight",children:t.title}),(0,l.jsxs)("div",{className:"flex justify-between items-center border-b border-[#BFBFBF] pb-2",children:[(0,l.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground gap-2",children:[(0,l.jsx)(n.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:t.duration})]}),(0,l.jsx)("button",{className:"h-10 w-10 cursor-pointer hover:bg-accent rounded-full flex items-center justify-center",onClick:()=>{var e,t;m?(null==(t=h.current)||t.pause(),v(!1)):(null==(e=h.current)||e.play(),v(!0))},children:m?(0,l.jsx)(o,{size:32}):(0,l.jsx)(d,{size:32})})]}),(0,l.jsx)("div",{className:"flex items-center justify-between pt-2",children:(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(a.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>p(t._id),children:(0,l.jsx)(c.A,{className:"w-4 h-4"})}),(0,l.jsx)(a.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-500 hover:text-blue-600 hover:bg-blue-50",onClick:()=>{r((0,C.Rz)(t)),r((0,C.Xq)(!0))},children:(0,l.jsx)(u.A,{className:"w-4 h-4"})})]})})]})]},t._id)};var b=r(27124);let w=e=>{var t;let{videosData:r,isLoading:a,error:s}=e,{contentCategory:n}=(0,f.G)(e=>e.content);if(a)return(0,l.jsx)("div",{className:"flex items-center justify-center py-28",children:(0,l.jsx)(b.A,{})});if(s)return(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsx)("div",{className:"text-red-500",children:"Error loading videos. Please try again."})});let i=(null==r||null==(t=r.data)?void 0:t.result)||[];return i.length?(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,l.jsx)(N,{video:e},e._id))})}):(0,l.jsx)("div",{className:"flex items-center justify-center py-12 h-[60vh]",children:(0,l.jsx)("div",{className:"text-muted-foreground",children:"All"===n?"No videos found. Upload your first video!":'No videos found in "'.concat(n,'" category.')})})};var q=r(51834),F=r(65142),A=r(76444),S=r(11186),T=r(6191),k=r(22544),R=r(75464),V=r(64269);let U=()=>{var e;let{isCreateModalOpen:t}=(0,f.G)(e=>e.content),r=(0,f.j)(),{control:s,register:n,handleSubmit:i,reset:o,formState:{errors:d}}=(0,k.mN)({defaultValues:{title:"",category:"",video:null}}),[c,{isLoading:u}]=h(),x=async e=>{console.log("Creating content:",e);let t=new FormData,l=e.duration;if(e.video instanceof File){try{let t=await (0,V.q)(e.video);if((l=Math.round(t))>180)return j.oR.error("Video duration must be 3 minutes or less"),!1}catch(e){return j.oR.error("Failed to read video duration"),!1}t.append("video",e.video)}let a={category:e.category,title:e.title,duration:"".concat(l," seconds")};t.append("data",JSON.stringify(a));try{var s,n;let e=await c(t);if((null==e?void 0:e.error)&&!(null==e||null==(n=e.error)||null==(s=n.data)?void 0:s.success))return j.oR.error(e.error.data.message),!1;if(e.data.success)return j.oR.success(e.data.message),o({title:"",category:"",video:null}),r((0,C._A)(!1)),!0;return!1}catch(e){return j.oR.error("Content Upload Failed"),!1}},m=(0,l.jsxs)(a.$,{children:[(0,l.jsx)(T.A,{className:"w-4 h-4 mr-2"}),"New Video Upload"]});return(0,l.jsxs)(q.lG,{open:t,onOpenChange:e=>r((0,C._A)(e)),children:[(0,l.jsx)(q.zM,{asChild:!0,children:m}),(0,l.jsxs)(q.Cf,{className:"max-w-md",children:[(0,l.jsx)(q.L3,{children:"Upload New Video"}),(0,l.jsxs)("form",{onSubmit:i(x),className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(A.J,{htmlFor:"title",children:"Video Title"}),(0,l.jsx)(F.p,{id:"title",...n("title",{required:"Title is required"}),placeholder:"Enter video title...",className:"w-full my-2"}),d.title&&(0,l.jsx)("p",{className:"text-red-400 text-xs mt-1",children:d.title.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(A.J,{htmlFor:"category",children:"Video Category"}),(0,l.jsx)(k.xI,{name:"category",control:s,rules:{required:"Category is required"},render:e=>{let{field:t}=e;return(0,l.jsxs)(S.l6,{onValueChange:t.onChange,value:t.value,children:[(0,l.jsx)(S.bq,{className:"w-full my-2",children:(0,l.jsx)(S.yv,{placeholder:"Select The Content Category"})}),(0,l.jsxs)(S.gC,{children:[(0,l.jsx)(S.eb,{value:"Budget",children:"Budget"}),(0,l.jsx)(S.eb,{value:"Debt",children:"Debt"}),(0,l.jsx)(S.eb,{value:"Saving",children:"Saving"}),(0,l.jsx)(S.eb,{value:"Investment",children:"Investment"}),(0,l.jsx)(S.eb,{value:"Taxation",children:"Taxation"})]})]})}}),d.category&&(0,l.jsx)("p",{className:"text-red-400 text-xs mt-1",children:d.category.message})]}),(0,l.jsx)(R.A,{name:"video",control:s,caption:"Upload your video",accept:"video/*",maxSize:0x6400000,error:null==(e=d.video)?void 0:e.message,onFileSelect:e=>console.log("File selected:",e),rules:{required:"Video is required"}}),(0,l.jsx)(a.$,{type:"submit",className:"w-full",children:u?"Loading...":"Upload Video"})]})]})]})},E=()=>{var e;let{updateContent:t,isUpdateModalOpen:r}=(0,f.G)(e=>e.content),s=(0,f.j)(),[n,{isLoading:i}]=y(),{control:o,register:d,handleSubmit:c,reset:u,formState:{errors:m}}=(0,k.mN)({defaultValues:t||{title:"",category:"",video:null}});(0,x.useEffect)(()=>{r&&t&&u(t)},[r,t,u]);let v=async e=>{let r=new FormData,l=Number("number"==typeof(null==t?void 0:t.duration.split(" ")[0])?null==t?void 0:t.duration.split(" ")[0]:0);if(e.video instanceof File){try{let t=await (0,V.q)(e.video);if((l=Math.round(t))>180)return j.oR.error("Video duration must be 3 minutes or less"),!1}catch(e){return j.oR.error("Failed to read video duration"),!1}r.append("video",e.video)}let a={category:e.category,title:e.title,duration:"".concat(l," seconds")};r.append("data",JSON.stringify(a));try{var i,o;let e=await n({id:null==t?void 0:t._id,updateContentData:r});if((null==e?void 0:e.error)&&!(null==e||null==(o=e.error)||null==(i=o.data)?void 0:i.success))return j.oR.error(e.error.data.message),!1;if(e.data.success)return j.oR.success(e.data.message),s((0,C.Xq)(!1)),!0;return!1}catch(e){return j.oR.error("Content Update Failed"),!1}};return(0,l.jsx)(q.lG,{open:r,onOpenChange:e=>s((0,C.Xq)(e)),children:(0,l.jsxs)(q.Cf,{className:"max-w-md",children:[(0,l.jsx)(q.L3,{children:"Update Video"}),(0,l.jsxs)("form",{onSubmit:c(v),className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(A.J,{htmlFor:"title",children:"Video Title"}),(0,l.jsx)(F.p,{id:"title",...d("title",{required:"Title is required"}),placeholder:"Enter video title...",className:"w-full my-2"}),m.title&&(0,l.jsx)("p",{className:"text-red-400 text-xs mt-1",children:m.title.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(A.J,{htmlFor:"category",children:"Video Category"}),(0,l.jsx)(k.xI,{name:"category",control:o,rules:{required:"Category is required"},render:e=>{let{field:t}=e;return(0,l.jsxs)(S.l6,{onValueChange:t.onChange,value:t.value,children:[(0,l.jsx)(S.bq,{className:"w-full my-2",children:(0,l.jsx)(S.yv,{placeholder:"Select The Content Category"})}),(0,l.jsxs)(S.gC,{children:[(0,l.jsx)(S.eb,{value:"Budget",children:"Budget"}),(0,l.jsx)(S.eb,{value:"Debt",children:"Debt"}),(0,l.jsx)(S.eb,{value:"Saving",children:"Saving"}),(0,l.jsx)(S.eb,{value:"Investment",children:"Investment"}),(0,l.jsx)(S.eb,{value:"Taxation",children:"Taxation"})]})]})}}),m.category&&(0,l.jsx)("p",{className:"text-red-400 text-xs mt-1",children:m.category.message})]}),(0,l.jsx)(R.A,{name:"video",control:o,caption:"Upload new video (optional)",accept:"video/*",maxSize:0x6400000,error:null==(e=m.video)?void 0:e.message,onFileSelect:e=>console.log("File selected:",e)}),(0,l.jsx)(a.$,{type:"submit",className:"w-full",children:i?"Loading...":"Update Video"})]})]})})};var O=r(26559);let P=["All","Budget","Debt","Saving","Investment","Taxation"];function _(){var e,t;let{contentCategory:r,updateContent:s,page:n}=(0,f.G)(e=>e.content),i=(0,f.j)(),{data:o,error:d,isLoading:c}=p({page:n,..."All"===r?{}:{category:r}});return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"space-y-6 bg-white p-10 rounded-l",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex gap-2",children:P.map(e=>(0,l.jsx)(a.$,{variant:r===e?"default":"outline",onClick:()=>i((0,C.cZ)(e)),children:e},e))}),(0,l.jsx)(U,{})]}),(0,l.jsx)(w,{videosData:o,isLoading:c,error:d}),s&&(0,l.jsx)(E,{}),!c&&(0,l.jsx)(O.A,{setPage:e=>i((0,C.Ir)(e)),totalPages:Number(null==o||null==(t=o.data)||null==(e=t.meta)?void 0:e.totalPage),page:n})]})})}}},e=>{e.O(0,[728,272,911,777,265,856,353,78,583,441,255,358],()=>e(e.s=27581)),_N_E=e.O()}]);