(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{2482:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>i,HA:()=>r,Ir:()=>n,Wk:()=>d,Xg:()=>l});let s=(0,t(26286).Z0)({name:"Ad",initialState:{updateAd:null,isUpdateModalOpen:!1,isCreateModalOpen:!1,page:1,limit:10},reducers:{setUpdateAd:(e,a)=>{e.updateAd=a.payload},setIsUpdateAdModalOpen:(e,a)=>{e.isUpdateModalOpen=a.payload},setIsCreateAdModalOpen:(e,a)=>{e.isCreateModalOpen=a.payload},setPage:(e,a)=>{e.page=a.payload}}}),{setUpdateAd:l,setIsCreateAdModalOpen:r,setIsUpdateAdModalOpen:d,setPage:n}=s.actions,i=s.reducer},6191:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11010:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},26559:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(95155);t(12115);var l=t(3998),r=t(71847);let d=(0,r.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),n=(0,r.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),i=e=>{let{totalPages:a,maxVisiblePages:t=5,setPage:r,page:i}=e,c=e=>{r(e),window.scrollTo({top:0,behavior:"smooth"})};if(a<=1)return null;let o=(()=>{let e=[];if(a<=t+2)for(let t=1;t<=a;t++)e.push(t);else{e.push(1);let s=Math.max(2,i-Math.floor(t/2)),l=Math.min(a-1,s+t-1);l===a-1&&(s=Math.max(2,l-t+1)),s>2&&e.push("...");for(let a=s;a<=l;a++)e.push(a);l<a-1&&e.push("..."),e.push(a)}return e})();return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-8",children:[(0,s.jsx)(l.$,{variant:"outline",size:"sm",className:"rounded-full h-10 w-10",onClick:()=>{i>1&&c(i-1)},disabled:1===i,children:(0,s.jsx)(d,{className:"w-4 h-4"})}),o.map((e,a)=>"..."===e?(0,s.jsx)("span",{className:"px-2",children:"..."},"ellipsis-".concat(a)):(0,s.jsx)(l.$,{size:"sm",variant:i===e?"default":"ghost",onClick:()=>(e=>{"number"==typeof e&&c(e)})(e),children:e},a)),(0,s.jsx)(l.$,{variant:"outline",size:"sm",className:"rounded-full h-10 w-10",onClick:()=>{i<a&&c(i+1)},disabled:i===a,children:(0,s.jsx)(n,{className:"w-4 h-4"})})]})}},47703:(e,a,t)=>{"use strict";t.d(a,{default:()=>F});var s=t(95155),l=t(31250),r=t(26559);let{useCreateAdMutation:d,useDeleteAdMutation:n,useGetAdsQuery:i,useUpdateAdMutation:c}=t(31012).q.injectEndpoints({endpoints:e=>({createAd:e.mutation({query:e=>({url:"".concat("/ad","/"),method:"POST",body:e}),invalidatesTags:["getAds"]}),getAds:e.query({query:e=>({url:"".concat("/ad","/"),method:"GET",params:e}),providesTags:["getAds"]}),updateAd:e.mutation({query:e=>{let{id:a,updateAdData:t}=e;return{url:"".concat("/ad","/").concat(a),method:"PATCH",body:t}},invalidatesTags:["getAds"]}),deleteAd:e.mutation({query:e=>({url:"".concat("/ad","/").concat(e),method:"DELETE"}),invalidatesTags:["getAds"]})})});var o=t(51834),u=t(65142),m=t(76444),x=t(6191),h=t(3998),p=t(22544),j=t(75464),f=t(18720),v=t(2482);let g=()=>{var e;let{isCreateModalOpen:a}=(0,l.G)(e=>e.ad),t=(0,l.j)(),[r]=d(),{control:n,register:i,handleSubmit:c,reset:g,formState:{errors:y}}=(0,p.mN)({defaultValues:{name:"",startDate:"",endDate:"",url:null}}),N=async e=>{let a=new FormData;e.url instanceof File&&a.append("image",e.url);let s={name:e.name,startDate:e.startDate,endDate:e.endDate};a.append("data",JSON.stringify(s));try{var l,d;let e=await r(a);if((null==e?void 0:e.error)&&!(null==e||null==(d=e.error)||null==(l=d.data)?void 0:l.success))return f.oR.error(e.error.data.message),!1;if(e.data.success)return f.oR.success(e.data.message),g({name:"",startDate:"",endDate:"",url:null}),t((0,v.HA)(!1)),!0;return!1}catch(e){return f.oR.error("Ad Creation Failed"),console.log(e),!1}},b=(0,s.jsxs)(h.$,{children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"New Ad Upload"]});return(0,s.jsxs)(o.lG,{open:a,onOpenChange:e=>t((0,v.HA)(e)),children:[(0,s.jsx)(o.zM,{asChild:!0,children:b}),(0,s.jsxs)(o.Cf,{className:"max-w-md",children:[(0,s.jsx)(o.L3,{children:"Create New Ad"}),(0,s.jsxs)("form",{onSubmit:c(N),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"name",children:"Ad Title"}),(0,s.jsx)(u.p,{id:"name",...i("name",{required:"Name is required"}),placeholder:"Enter ad name...",className:"w-full my-2"}),y.name&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:y.name.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(u.p,{type:"date",id:"startDate",...i("startDate",{required:"Start Date is required"}),className:"w-full my-2"}),y.startDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:y.startDate.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"endDate",children:"End Date"}),(0,s.jsx)(u.p,{type:"date",id:"endDate",...i("endDate",{required:"End Date is required"}),className:"w-full my-2"}),y.endDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:y.endDate.message})]})]}),(0,s.jsx)(j.A,{name:"url",control:n,caption:"Upload Ad Video",accept:"image/*",maxSize:0x6400000,error:null==(e=y.url)?void 0:e.message,onFileSelect:e=>console.log("File selected:",e)}),(0,s.jsx)(h.$,{type:"submit",className:"w-full",children:"Create Ad"})]})]})]})};var y=t(86948),N=t(71360),b=t(11010),w=t(15239);function D(e){let{adsData:a}=e,t=(0,l.j)(),[r]=n(),d=async e=>{try{var a,t,s;let l=await r(e);if((null==l?void 0:l.error)&&!(null==l||null==(t=l.error)||null==(a=t.data)?void 0:a.success))return void f.oR.error(l.error.data.message||"Failed to delete content");(null==(s=l.data)?void 0:s.success)&&f.oR.success(l.data.message||"Content deleted successfully")}catch(e){console.error("Delete error:",e),f.oR.error("Failed to delete content")}},i=(null==a?void 0:a.data.result)||[];return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,s.jsxs)(y.Zp,{className:"shadow-lg rounded-2xl overflow-hidden",children:[(0,s.jsx)(w.default,{src:e.url,alt:"Budget Chart",className:"w-full h-40 object-cover",width:120,height:120,priority:!0}),(0,s.jsxs)(y.Wu,{className:"p-4 space-y-3",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold leading-tight",children:e.name}),(0,s.jsx)("div",{className:"flex justify-between items-center border-b border-[#BFBFBF] pb-2",children:(0,s.jsxs)("div",{className:"flex items-center text-sm gap-2 text-[#000000]",children:[(0,s.jsx)("p",{children:"Ads Duration:"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:e.startDate})," - ",(0,s.jsx)("span",{children:e.endDate})]})]})}),(0,s.jsx)("div",{className:"flex items-center justify-between pt-2",children:(0,s.jsxs)("div",{className:"flex gap-3 text-[#999999]",children:[(0,s.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d(e._id),children:(0,s.jsx)(N.A,{className:"w-4 h-4"})}),(0,s.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{t((0,v.Xg)(e)),t((0,v.Wk)(!0))},children:(0,s.jsx)(b.A,{className:"w-4 h-4"})})]})})]})]},e._id))})}var A=t(12115);let k=()=>{var e;let{updateAd:a,isUpdateModalOpen:t}=(0,l.G)(e=>e.ad),r=(0,l.j)(),[d]=c(),{control:n,register:i,handleSubmit:x,reset:g,formState:{errors:y}}=(0,p.mN)({defaultValues:a||{name:"",startDate:"",endDate:"",url:null}});(0,A.useEffect)(()=>{t&&a&&g(a)},[t,a,g]);let N=async e=>{let t=new FormData;e.url instanceof File&&t.append("image",e.url);let s={title:e.title,category:e.category,startDate:e.startDate,endDate:e.endDate};t.append("data",JSON.stringify(s));try{var l,n;let e=await d({id:null==a?void 0:a._id,updateAdData:t});if((null==e?void 0:e.error)&&!(null==e||null==(n=e.error)||null==(l=n.data)?void 0:l.success))return f.oR.error(e.error.data.message),!1;if(e.data.success)return f.oR.success(e.data.message),r((0,v.Wk)(!1)),!0;return!1}catch(e){return f.oR.error("Ad Update Failed"),!1}};return(0,s.jsx)(o.lG,{open:t,onOpenChange:e=>r((0,v.Wk)(e)),children:(0,s.jsxs)(o.Cf,{className:"max-w-md",children:[(0,s.jsx)(o.L3,{children:"Update Ad"}),(0,s.jsxs)("form",{onSubmit:x(N),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"name",children:"Ad Title"}),(0,s.jsx)(u.p,{id:"name",...i("name",{required:"Name is required"}),placeholder:"Enter ad name...",className:"w-full my-2"}),y.name&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:y.name.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(u.p,{type:"date",id:"startDate",...i("startDate",{required:"Start Date is required"}),className:"w-full my-2"}),y.startDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:y.startDate.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"endDate",children:"End Date"}),(0,s.jsx)(u.p,{type:"date",id:"endDate",...i("endDate",{required:"End Date is required"}),className:"w-full my-2"}),y.endDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:y.endDate.message})]})]}),(0,s.jsx)(j.A,{name:"url",control:n,caption:"Upload new ad video (optional)",accept:"image/*",maxSize:0x6400000,error:null==(e=y.url)?void 0:e.message,onFileSelect:e=>console.log("File selected:",e)}),(0,s.jsx)(h.$,{type:"submit",className:"w-full",children:"Update Ad"})]})]})})};var C=t(27124);function F(){var e,a;let{updateAd:t,page:d}=(0,l.G)(e=>e.ad),n=(0,l.j)(),{data:c,error:o,isLoading:u}=i({page:d});return(0,s.jsxs)("div",{className:"space-y-6 bg-white p-10 rounded-l",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex gap-2"}),(0,s.jsx)(g,{})]}),u?(0,s.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,s.jsx)(C.A,{})}):(0,s.jsx)(D,{adsData:c,isLoading:u,error:o}),t&&(0,s.jsx)(k,{}),!u&&(0,s.jsx)(r.A,{setPage:e=>n((0,v.Ir)(e)),totalPages:Number(null==c||null==(a=c.data)||null==(e=a.meta)?void 0:e.totalPage),page:d})]})}},61108:(e,a,t)=>{Promise.resolve().then(t.bind(t,97144)),Promise.resolve().then(t.bind(t,47703))},65142:(e,a,t)=>{"use strict";t.d(a,{p:()=>r});var s=t(95155);t(12115);var l=t(64269);function r(e){let{className:a,type:t,...r}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...r})}},71360:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},75464:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(95155),l=t(12115);let r=(0,t(71847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var d=t(3998),n=t(22544);function i(e){let{name:a,control:t,caption:l,accept:r="video/*",maxSize:d,onFileSelect:i,disabled:o=!1,error:u,rules:m}=e;return(0,s.jsx)(n.xI,{name:a,control:t,rules:m,render:e=>{let{field:{onChange:a,value:t}}=e;return(0,s.jsx)(c,{value:t,onChange:a,caption:l,accept:r,maxSize:d,onFileSelect:i,disabled:o,error:u})}})}function c(e){let{value:a,onChange:t,caption:n,accept:i,maxSize:c,onFileSelect:o,disabled:u,error:m}=e,x=(0,l.useRef)(null),[h,p]=(0,l.useState)(a instanceof File?a.name:null);return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"border-2 border-dashed rounded-2xl p-12 text-center ".concat(m?"border-red-500":"border-muted"),children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:(0,s.jsx)(r,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium",children:n}),h&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:h}),(0,s.jsx)("input",{type:"file",accept:i,ref:x,onChange:e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){if(c&&s.size>c)return void alert("File size must be less than ".concat((c/1024/1024).toFixed(2),"MB"));p(s.name),t(s),null==o||o(s)}else p(null),t(null),null==o||o(null)},className:"hidden",disabled:u}),(0,s.jsxs)("div",{className:"flex gap-2 justify-center mt-4",children:[(0,s.jsxs)(d.$,{type:"button",onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},disabled:u,children:[(0,s.jsx)(r,{className:"w-4 h-4 mr-2"}),h?"Change File":"Select File"]}),h&&(0,s.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>{p(null),t(null),null==o||o(null),x.current&&(x.current.value="")},disabled:u,children:"Clear"})]})]})]})}),m&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-2",children:m})]})}},76444:(e,a,t)=>{"use strict";t.d(a,{J:()=>d});var s=t(95155);t(12115);var l=t(10489),r=t(64269);function d(e){let{className:a,...t}=e;return(0,s.jsx)(l.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}}},e=>{e.O(0,[728,272,911,777,317,856,78,441,255,358],()=>e(e.s=61108)),_N_E=e.O()}]);