(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{2482:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>i,HA:()=>l,Ir:()=>n,Wk:()=>d,Xg:()=>r});let s=(0,t(26286).Z0)({name:"Ad",initialState:{updateAd:null,isUpdateModalOpen:!1,isCreateModalOpen:!1,page:1,limit:10},reducers:{setUpdateAd:(e,a)=>{e.updateAd=a.payload},setIsUpdateAdModalOpen:(e,a)=>{e.isUpdateModalOpen=a.payload},setIsCreateAdModalOpen:(e,a)=>{e.isCreateModalOpen=a.payload},setPage:(e,a)=>{e.page=a.payload}}}),{setUpdateAd:r,setIsCreateAdModalOpen:l,setIsUpdateAdModalOpen:d,setPage:n}=s.actions,i=s.reducer},47703:(e,a,t)=>{"use strict";t.d(a,{default:()=>F});var s=t(95155),r=t(31250),l=t(26559);let{useCreateAdMutation:d,useDeleteAdMutation:n,useGetAdsQuery:i,useUpdateAdMutation:c}=t(31012).q.injectEndpoints({endpoints:e=>({createAd:e.mutation({query:e=>({url:"".concat("/ad","/"),method:"POST",body:e}),invalidatesTags:["getAds"]}),getAds:e.query({query:e=>({url:"".concat("/ad","/"),method:"GET",params:e}),providesTags:["getAds"]}),updateAd:e.mutation({query:e=>{let{id:a,updateAdData:t}=e;return{url:"".concat("/ad","/").concat(a),method:"PATCH",body:t}},invalidatesTags:["getAds"]}),deleteAd:e.mutation({query:e=>({url:"".concat("/ad","/").concat(e),method:"DELETE"}),invalidatesTags:["getAds"]})})});var o=t(51834),u=t(65142),m=t(76444),x=t(6191),h=t(3998),g=t(22544),j=t(75464),p=t(18720),v=t(2482),y=t(11186);let D=()=>{var e;let{isCreateModalOpen:a}=(0,r.G)(e=>e.ad),t=(0,r.j)(),[l,{isLoading:n}]=d(),{control:i,register:c,handleSubmit:D,reset:N,formState:{errors:f}}=(0,g.mN)({defaultValues:{name:"",category:"",startDate:"",endDate:"",url:null}}),A=async e=>{let a=new FormData;e.url instanceof File&&a.append("image",e.url);let s={name:e.name,category:e.category,startDate:e.startDate,endDate:e.endDate};a.append("data",JSON.stringify(s));try{var r,d;let e=await l(a);if((null==e?void 0:e.error)&&!(null==e||null==(d=e.error)||null==(r=d.data)?void 0:r.success))return p.oR.error(e.error.data.message),!1;if(e.data.success)return p.oR.success(e.data.message),N({name:"",startDate:"",endDate:"",url:null}),t((0,v.HA)(!1)),!0;return!1}catch(e){return p.oR.error("Ad Creation Failed"),console.log(e),!1}},b=(0,s.jsxs)(h.$,{children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"New Ad Upload"]});return(0,s.jsxs)(o.lG,{open:a,onOpenChange:e=>t((0,v.HA)(e)),children:[(0,s.jsx)(o.zM,{asChild:!0,children:b}),(0,s.jsxs)(o.Cf,{className:"max-w-md",children:[(0,s.jsx)(o.L3,{children:"Create New Ad"}),(0,s.jsxs)("form",{onSubmit:D(A),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"name",children:"Ad Title"}),(0,s.jsx)(u.p,{id:"name",...c("name",{required:"Name is required"}),placeholder:"Enter ad name...",className:"w-full my-2"}),f.name&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"category",children:"Ad Category"}),(0,s.jsx)(g.xI,{name:"category",control:i,rules:{required:"Category is required"},render:e=>{let{field:a}=e;return(0,s.jsxs)(y.l6,{onValueChange:a.onChange,value:a.value,children:[(0,s.jsx)(y.bq,{className:"w-full my-2",children:(0,s.jsx)(y.yv,{placeholder:"Select The Ad Category"})}),(0,s.jsxs)(y.gC,{children:[(0,s.jsx)(y.eb,{value:"Budget",children:"Budget"}),(0,s.jsx)(y.eb,{value:"Debt",children:"Debt"}),(0,s.jsx)(y.eb,{value:"Saving",children:"Saving"}),(0,s.jsx)(y.eb,{value:"Investment",children:"Investment"}),(0,s.jsx)(y.eb,{value:"Taxation",children:"Taxation"})]})]})}}),f.category&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.category.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(u.p,{type:"date",id:"startDate",...c("startDate",{required:"Start Date is required"}),className:"w-full my-2"}),f.startDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.startDate.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"endDate",children:"End Date"}),(0,s.jsx)(u.p,{type:"date",id:"endDate",...c("endDate",{required:"End Date is required"}),className:"w-full my-2"}),f.endDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.endDate.message})]})]}),(0,s.jsx)(j.A,{name:"url",control:i,caption:"Upload Ad",accept:"image/*",maxSize:0x6400000,error:null==(e=f.url)?void 0:e.message,onFileSelect:e=>console.log("File selected:",e)}),(0,s.jsx)(h.$,{type:"submit",className:"w-full",children:n?"Loading...":"Create Ad"})]})]})]})};var N=t(86948),f=t(71360),A=t(11010),b=t(15239);function w(e){let{adsData:a}=e,t=(0,r.j)(),[l]=n(),d=async e=>{try{var a,t,s;let r=await l(e);if((null==r?void 0:r.error)&&!(null==r||null==(t=r.error)||null==(a=t.data)?void 0:a.success))return void p.oR.error(r.error.data.message||"Failed to delete content");(null==(s=r.data)?void 0:s.success)&&p.oR.success(r.data.message||"Content deleted successfully")}catch(e){console.error("Delete error:",e),p.oR.error("Failed to delete content")}},i=(null==a?void 0:a.data.result)||[];return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,s.jsxs)(N.Zp,{className:"shadow-lg rounded-2xl overflow-hidden",children:[(0,s.jsx)(b.default,{src:e.url,alt:"Budget Chart",className:"w-full h-40 object-cover",width:120,height:120,priority:!0}),(0,s.jsxs)(N.Wu,{className:"p-4 space-y-3",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold leading-tight",children:e.name}),(0,s.jsx)("div",{className:"flex justify-between items-center border-b border-[#BFBFBF] pb-2",children:(0,s.jsxs)("div",{className:"flex items-center text-sm gap-2 text-[#000000]",children:[(0,s.jsx)("p",{children:"Ads Duration:"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:new Date(e.startDate).toISOString().slice(0,10)})," - ",(0,s.jsx)("span",{children:new Date(e.endDate).toISOString().slice(0,10)})]})]})}),(0,s.jsx)("div",{className:"flex items-center justify-between pt-2",children:(0,s.jsxs)("div",{className:"flex gap-3 text-[#999999]",children:[(0,s.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d(e._id),children:(0,s.jsx)(f.A,{className:"w-4 h-4"})}),(0,s.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{t((0,v.Xg)(e)),t((0,v.Wk)(!0))},children:(0,s.jsx)(A.A,{className:"w-4 h-4"})})]})})]})]},e._id))})}var C=t(12115);let S=()=>{var e;let{updateAd:a,isUpdateModalOpen:t}=(0,r.G)(e=>e.ad),l=(0,r.j)(),[d,{isLoading:n}]=c(),{control:i,register:x,handleSubmit:D,reset:N,formState:{errors:f}}=(0,g.mN)({defaultValues:a||{name:"",startDate:"",category:"",endDate:"",url:null}});(0,C.useEffect)(()=>{t&&a&&N(a)},[t,a,N]);let A=async e=>{let t=new FormData;e.url instanceof File&&t.append("image",e.url);let s={title:e.title,category:e.category,startDate:e.startDate,endDate:e.endDate};t.append("data",JSON.stringify(s));try{var r,n;let e=await d({id:null==a?void 0:a._id,updateAdData:t});if((null==e?void 0:e.error)&&!(null==e||null==(n=e.error)||null==(r=n.data)?void 0:r.success))return p.oR.error(e.error.data.message),!1;if(e.data.success)return p.oR.success(e.data.message),l((0,v.Wk)(!1)),!0;return!1}catch(e){return p.oR.error("Ad Update Failed"),!1}};return(0,s.jsx)(o.lG,{open:t,onOpenChange:e=>l((0,v.Wk)(e)),children:(0,s.jsxs)(o.Cf,{className:"max-w-md",children:[(0,s.jsx)(o.L3,{children:"Update Ad"}),(0,s.jsxs)("form",{onSubmit:D(A),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"name",children:"Ad Title"}),(0,s.jsx)(u.p,{id:"name",...x("name",{required:"Name is required"}),placeholder:"Enter ad name...",className:"w-full my-2"}),f.name&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"category",children:"Ad Category"}),(0,s.jsx)(g.xI,{name:"category",control:i,rules:{required:"Category is required"},render:e=>{let{field:a}=e;return(0,s.jsxs)(y.l6,{onValueChange:a.onChange,value:a.value,children:[(0,s.jsx)(y.bq,{className:"w-full my-2",children:(0,s.jsx)(y.yv,{placeholder:"Select The Ad Category"})}),(0,s.jsxs)(y.gC,{children:[(0,s.jsx)(y.eb,{value:"Budget",children:"Budget"}),(0,s.jsx)(y.eb,{value:"Debt",children:"Debt"}),(0,s.jsx)(y.eb,{value:"Saving",children:"Saving"}),(0,s.jsx)(y.eb,{value:"Investment",children:"Investment"}),(0,s.jsx)(y.eb,{value:"Taxation",children:"Taxation"})]})]})}}),f.category&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.category.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(u.p,{type:"date",id:"startDate",...x("startDate",{required:"Start Date is required"}),className:"w-full my-2"}),f.startDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.startDate.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"endDate",children:"End Date"}),(0,s.jsx)(u.p,{type:"date",id:"endDate",...x("endDate",{required:"End Date is required"}),className:"w-full my-2"}),f.endDate&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:f.endDate.message})]})]}),(0,s.jsx)(j.A,{name:"url",control:i,caption:"Upload new ad (optional)",accept:"image/*",maxSize:0x6400000,error:null==(e=f.url)?void 0:e.message,onFileSelect:e=>console.log("File selected:",e)}),(0,s.jsx)(h.$,{type:"submit",className:"w-full",children:n?"Loading...":"Update Ad"})]})]})})};var q=t(27124);function F(){var e,a;let{updateAd:t,page:d}=(0,r.G)(e=>e.ad),n=(0,r.j)(),{data:c,error:o,isLoading:u}=i({page:d});return(0,s.jsxs)("div",{className:"space-y-6 bg-white p-10 rounded-l",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex gap-2"}),(0,s.jsx)(D,{})]}),u?(0,s.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,s.jsx)(q.A,{})}):(0,s.jsx)(w,{adsData:c,isLoading:u,error:o}),t&&(0,s.jsx)(S,{}),!u&&(0,s.jsx)(l.A,{setPage:e=>n((0,v.Ir)(e)),totalPages:Number(null==c||null==(a=c.data)||null==(e=a.meta)?void 0:e.totalPage),page:d})]})}},82301:(e,a,t)=>{Promise.resolve().then(t.bind(t,97144)),Promise.resolve().then(t.bind(t,47703))}},e=>{e.O(0,[728,272,911,777,265,856,353,78,583,441,255,358],()=>e(e.s=82301)),_N_E=e.O()}]);