"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{3998:(e,t,a)=>{a.d(t,{$:()=>i});var r=a(95155);a(12115);var n=a(17129),s=a(83101),o=a(64269);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:a,size:s,asChild:i=!1,...d}=e,c=i?n.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,o.cn)(l({variant:a,size:s,className:t})),...d})}},27124:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(95155),n=a(42348),s=a(64269);let o=function(e){let{className:t,...a}=e;return(0,r.jsx)(n.A,{role:"status","aria-label":"Loading",className:(0,s.cn)("size-8 animate-spin text-primary",t),...a})}},31012:(e,t,a)=>{a.d(t,{q:()=>d});var r=a(36317),n=a(61321),s=a(18720),o=a(53788);let l=(0,r.cw)({baseUrl:"".concat("https://backend.rehoapp.co.uk","/api/v1"),credentials:"include",prepareHeaders:(e,t)=>{let{getState:a}=t,r=a().auth.token;return r&&e.set("authorization","Bearer ".concat(r)),e}}),i=async(e,t,a)=>{var r,n;let i=await l(e,t,a);if((null==(r=i.error)?void 0:r.status)===404&&(console.log("404"),s.oR.error("User not found")),(null==(n=i.error)?void 0:n.status)===401)try{let r=await fetch("".concat("https://backend.rehoapp.co.uk","/api/v1/auth/refresh-token"),{method:"POST",credentials:"include"}),n=await r.json();n.success?(t.dispatch((0,o.yU)(n.data.accessToken)),i=await l(e,t,a)):t.dispatch((0,o.je)())}catch(e){t.dispatch((0,o.je)())}return i},d=(0,n.xP)({reducerPath:"baseApi",baseQuery:i,tagTypes:["getUser","getAppointments","getContents","getAds"],endpoints:()=>({})})},31250:(e,t,a)=>{a.d(t,{G:()=>s,j:()=>n});var r=a(1213);let n=r.wA,s=r.d4},51834:(e,t,a)=>{a.d(t,{Cf:()=>u,L3:()=>g,lG:()=>l,zM:()=>i});var r=a(95155);a(12115);var n=a(93409),s=a(65229),o=a(64269);function l(e){let{...t}=e;return(0,r.jsx)(n.bL,{"data-slot":"dialog",...t})}function i(e){let{...t}=e;return(0,r.jsx)(n.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,r.jsx)(n.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,r.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,showCloseButton:l=!0,...i}=e;return(0,r.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,r.jsx)(c,{}),(0,r.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:[a,l&&(0,r.jsxs)(n.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(s.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function g(e){let{className:t,...a}=e;return(0,r.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg leading-none font-semibold",t),...a})}},53788:(e,t,a)=>{a.d(t,{Ay:()=>d,em:()=>s,je:()=>i,r1:()=>o,yU:()=>n});let r=(0,a(26286).Z0)({name:"product",initialState:{user:null,token:null,collapsed:!1,loading:!1},reducers:{storUserData:(e,t)=>{e.user=t.payload},storToken:(e,t)=>{e.token=t.payload},setLoading:(e,t)=>{e.loading=t.payload},isCollapsed:(e,t)=>{e.collapsed=t.payload},logOut:e=>{e.user=null,e.token=null,localStorage.removeItem("token")}}}),{storToken:n,storUserData:s,setLoading:o,isCollapsed:l,logOut:i}=r.actions,d=r.reducer},64269:(e,t,a)=>{a.d(t,{cn:()=>s,q:()=>o});var r=a(2821),n=a(75889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}let o=e=>new Promise((t,a)=>{let r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>{window.URL.revokeObjectURL(r.src),t(r.duration)},r.onerror=()=>{a(Error("Failed to load video metadata"))},r.src=URL.createObjectURL(e)})},85897:(e,t,a)=>{a.d(t,{BK:()=>l,eu:()=>o,q5:()=>i});var r=a(95155);a(12115);var n=a(7870),s=a(64269);function o(e){let{className:t,...a}=e;return(0,r.jsx)(n.bL,{"data-slot":"avatar",className:(0,s.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)(n._V,{"data-slot":"avatar-image",className:(0,s.cn)("aspect-square size-full",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)(n.H4,{"data-slot":"avatar-fallback",className:(0,s.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...a})}},86948:(e,t,a)=>{a.d(t,{Wu:()=>i,ZB:()=>l,Zp:()=>s,aR:()=>o});var r=a(95155);a(12115);var n=a(64269);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...a})}},92300:(e,t,a)=>{a.d(t,{MA:()=>d,VL:()=>s,nv:()=>o,vf:()=>r});let{useGetUserQuery:r,useEmailUserMutation:n,useGetAllUsersQuery:s,useBlockUserMutation:o,useDeleteUserMutation:l,useGetUserByIdQuery:i,useGetAdminStatsQuery:d}=a(31012).q.injectEndpoints({endpoints:e=>({getUser:e.query({query:()=>({url:"users/profile",method:"GET"})}),getUserById:e.query({query:e=>({url:"users/user/".concat(e),method:"GET"})}),deleteUser:e.mutation({query:e=>({url:"users/delete/".concat(e),method:"DELETE"})}),blockUser:e.mutation({query:e=>({url:"users/block/".concat(e),method:"DELETE"})}),getAllUsers:e.query({query:e=>({url:"users",method:"GET",params:e})}),getAdminStats:e.query({query:e=>({url:"admin/stats",method:"GET",params:e})}),emailUser:e.mutation({query:e=>({url:"email",method:"POST",body:e})})})})},97144:(e,t,a)=>{a.d(t,{DashboardLayout:()=>z});var r=a(95155),n=a(52619),s=a.n(n),o=a(20063),l=a(64269),i=a(59384),d=a(91169),c=a(80534),u=a(60890),g=a(38104),m=a(15870),h=a(84926),f=a(31250),p=a(53788),x=a(15239);let v=[{name:"Dashboard",href:"/",icon:i.A},{name:"User Management",href:"/users",icon:d.A},{name:"Finance Data Monitoring",href:"/finance",icon:c.A},{name:"Content Management",href:"/content",icon:u.A},{name:"Appointment",href:"/appointment",icon:g.A},{name:"Ad Management",href:"/ad",icon:m.A}];function b(){let e=(0,o.usePathname)(),t=(0,f.j)();return(0,r.jsxs)("div",{className:"flex h-screen w-64 flex-col bg-white border-r border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded",children:(0,r.jsx)(x.default,{src:"/logo.png",alt:"logo",width:120,height:40,priority:!0})}),(0,r.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:"ROHU APP "})]}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-1",children:v.map(t=>{let a=e===t.href;return(0,r.jsxs)(s(),{href:t.href,className:(0,l.cn)("flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors",a?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"),children:[(0,r.jsx)(t.icon,{className:"w-5 h-5"}),t.name]},t.name)})}),(0,r.jsx)("div",{className:"px-4 py-4 border-t border-gray-200",children:(0,r.jsxs)("button",{onClick:()=>{t((0,p.je)()),console.log("logout")},className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 w-full cursor-pointer",children:[(0,r.jsx)(h.A,{className:"w-5 h-5"}),"Logout"]})})]})}var y=a(85897),j=a(3998),k=a(92300),w=a(12115);function N(){let e=(0,f.j)(),{data:t,isLoading:a}=(0,k.vf)(void 0);(0,w.useEffect)(()=>{t&&(e((0,p.r1)(a)),e((0,p.em)({name:t.data.name,email:t.data.email,role:t.data.role,image:t.data.image?t.data.image:void 0})))},[a,e,t]);let n=null==t?void 0:t.data;return null===n||a?null:(0,r.jsxs)("header",{className:"flex items-center justify-end gap-4 px-6 py-4 border-b",style:{background:"var(--background)",color:"var(--foreground)"},children:[(0,r.jsx)(j.$,{variant:"ghost",size:"icon",className:"rounded-lg"}),(0,r.jsxs)(y.eu,{children:[(0,r.jsx)(y.BK,{src:(null==n?void 0:n.image)?null==n?void 0:n.image:"/placeholder.svg?height=32&width=32"}),(0,r.jsx)(y.q5,{children:null==n?void 0:n.name})]})]})}var A=a(86600),U=a(27124);function z(e){let{children:t}=e,{token:a}=(0,f.G)(e=>e.auth),n=(0,o.useRouter)(),s=(0,o.usePathname)();return((0,w.useEffect)(()=>{if(!s.startsWith("/auth")){if(!a)return void n.push("/auth/login");try{let e=(0,A.s)(a);(!e.exp||1e3*e.exp<Date.now())&&n.push("/auth/login")}catch(e){n.push("/auth/login")}}},[a,s,n]),a)?(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsx)(b,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(N,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto p-6",children:t})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center pt-40",children:(0,r.jsx)(U.A,{})})}}}]);